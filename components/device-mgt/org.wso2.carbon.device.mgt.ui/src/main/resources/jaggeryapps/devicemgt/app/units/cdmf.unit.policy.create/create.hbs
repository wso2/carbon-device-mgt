{{#zone "content"}}
{{css "css/addPolicy-custom.css"}}
    {{#if isAuthorized}}
        <span id="logged-in-user" class="hidden" data-username="{{@user.username}}" data-domain="{{@user.domain}}"
              data-tenant-id="{{@user.tenantId}}" data-iscloud="{{isCloud}}"></span>
              <div class="submenu detail_sub_headings">
                <ul>
                    <li><a class="active" href="{{@app.context}}/policies">Policies</a></li>    
                </ul>   
            </div> 
        <div class="">
            <div class="col-md-12">
                <div class="stepsDiv">
                     <div class="stepNavBar">
                        <div class="addDevice">Add Policy</div>
                     </div>
                     <div class="stepContent">
                       <div>
                           <div>
                               <span>01</span><br><span class=" itm-wiz itm-wiz-active" data-step="policy-platform"> Select a platform</span>
                            </div>
                              </div>
        <div class="dividerPadding"> <img src="/devicemgt/public/cdmf.page.assets/img/Sidebar_Divider.png" style="vertical-align: inherit;margin-right: 5px;"/></div>
                           
                                        <div >
                                            <span>02</span><br><span class="itm-wiz" data-step="policy-profile">Configure profile</span>
                                        </div>
                                
        <div class="dividerPadding"> <img src="/devicemgt/public/cdmf.page.assets/img/Sidebar_Divider.png" style="vertical-align: inherit;margin-right: 5px;"/></div>
                            
                                        <div><span>03</span><br><span  class="itm-wiz" data-step="policy-criteria">Assign to groups</span></div>
                                
        <div class="dividerPadding"> <img src="/devicemgt/public/cdmf.page.assets/img/Sidebar_Divider.png" style="vertical-align: inherit;margin-right: 5px;"/></div>
                            
                                       <div > <span>04</span><br><span class="itm-wiz" data-step="policy-naming"> Publish to devices</span></div>
                                      
                     </div>
                </div></div>

                <div class="col-centered policy-message hidden" style=" margin-top: 40px;">
                    <div class="wr-form detail_box" >
                        <h1 id="policy-message-page-wizard-title" class="page-sub-title">Policy creation is
                            successful.</h1>
                        <br>Please click <b>"Add Another Policy"</b>, if you wish to add another policy or click
                        <b>"View policy list"</b> to complete the process and go back to the policy list.
                        <hr>
                        <br>
                        <button class="cu-btn-inner wr-btn wizard-stepper" data-current="policy-message"
                                data-direct="{{@app.context}}/policies/">
                            View policy list
                        </button>
                        <!--suppress HtmlUnknownTarget -->
                        <a href="{{@app.context}}/policy/add" class="cu-btn-inner ops_icon">
                          <img class="operation_icon icon_active"src="/devicemgt/public/cdmf.page.assets/img/default/Icon_Add.png" style="vertical-align:inherit;margin-rigth:5px;">
                            <img class="operation_icon" src="/devicemgt/public/cdmf.page.assets/img/hover/Icon_Add_Hover.png" style="vertical-align:inherit;margin-rigth:5px;">
                            Add another policy
                        </a>
                    </div>
                </div>

                <div class="col-centered wr-content policy-naming hidden">
                    <h1>Publish to devices</h1>
                    <div class="wr-form detail_box">
                        {{!--<h1 id="policy-naming-page-wizard-title" class="page-sub-title">ADD POLICY</h1>--}}
                        {{!--<hr>--}}
                        <div id="policy-naming-wizard-steps" class="row wr-wizard"></div>
                        {{!--<hr>--}}
                        <div class="row">
                            <div class="col-lg-12">

                                <div id="policy-naming-main-error-msg" class="alert alert-danger hidden" role="alert">
                                    <i class="icon fw fw-error"></i><span></span>
                                </div>
                                <div class="clearfix">
                                    <div class="form_field">
                                    <label class="wr-input-label">Name</label>
                                    <div id="policyNameField" class="wr-input-control">
                                        <div class="cus-col-50 form-group wr-input-control">
                                            <!--suppress HtmlFormInputWithoutLabel -->
                                            <input id="policy-name-input" class="form-control" type="text" value=""/>
                                            {{!--<label class="error nameEmpty hidden" for="summary">Policy name is required
                                                &
                                                Should be be 1-to-30
                                                characters long.</label>--}}
                                        </div>
                                    </div>
                                    </div>
                                    <div class="form_field">
                                    <label class="wr-input-label">
                                        Description
                                    </label>
                                    <div class="wr-input-control">
                                        <div class="cus-col-50">
                                <textarea id="policy-description-input" class="form-control" rows="10"
                                          placeholder="[ Summary about the policy ]"></textarea>
                                        </div>
                                        
                                    </div>
                                    </div>
                                </div>
                                <hr>
                                <br>
                                <div class="wr-input-control wr-btn-grp">
                                    <a href="javascript:void(0)" id="back_btns" class="cu-btn-inner wr-btn wizard-stepper" data-is-back-btn="true"
                                       data-current="policy-naming" data-next="policy-criteria">Back</a>
                                    <a href="javascript:void(0)" class="cu-btn-inner wr-btn wizard-stepper"
                                       data-current="policy-naming-publish" data-next="policy-message"
                                       data-validate="true" style="float:right" >Publish</a>
                                    {{!--<a href="javascript:void(0)" class="cu-btn-inner wr-btn wizard-stepper"
                                       data-current="policy-naming"
                                       data-next="policy-message" data-validate="true" style="float:right">Done</a>--}}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-centered wr-content policy-criteria hidden">
                    <h1> Assign to groups</h1>
                    <div class="wr-form detail_box">
                        {{!--<h1 id="policy-criteria-page-wizard-title" class="page-sub-title">ADD POLICY</h1>
                        <hr>--}}
                        <div id="policy-criteria-wizard-steps" class="row wr-wizard"></div>
                        {{!--<hr>--}}
                        <div class="row">
                            <div class="col-lg-6">
                                <div id="policy-criteria-main-error-msg" class="alert alert-danger hidden" role="alert">
                                    <i class="icon fw fw-error"></i><span></span>
                                </div>
                                <div>
                                    <label class="wr-input-label" title="">
                                        Compliance Action
                                    </label>
                                    <div class="wr-input-control" style="display:block;">
                                        <div class="cus-col-50">
                                            <!--suppress HtmlFormInputWithoutLabel -->
                                            <select id="action-input" class="form-control">
                                                <option data-action="enforce" selected>Enforce</option>
                                                <option data-action="warn">Warn</option>
                                                <option data-action="monitor">Monitor</option>
                                            </select>
                                        </div>
                                        <br class="c-both"/>
                                    </div>
                                    <div class="wr-input-control">
                                        {{#if isAuthorizedViewRoles}}
                                            <label class="wr-input-control radio light">
                                                <input id="user-roles-radio-btn" type="radio"
                                                       name="select-users-radio-btn"
                                                       class="select-users-radio" checked/>
                                                <span class="helper">
                                                    Set User Roles
                                                </span>
                                            </label>
                                        {{/if}}
                                        {{#if isAuthorizedViewUsers}}
                                            <label class="wr-input-control radio light" rel="assetfilter">
                                                <input id="users-radio-btn" type="radio" name="select-users-radio-btn"
                                                       class="select-users-radio"/>
                                                <span class="helper">Set Users</span>
                                            </label>
                                        {{/if}}
                                    </div>
                                    {{#if isAuthorizedViewRoles}}
                                        <div id="user-roles-select-field" class="select-users">
                                            <div class="wr-input-control">
                                                <div id="userRoleSelect" class="cus-col-50">
                                                    <!--suppress HtmlFormInputWithoutLabel -->
                                                    <select id="user-roles-input" class="form-control select2"
                                                            multiple="multiple">
                                                        <option value="ANY" selected>Any</option>
                                                        {{#each roles}}
                                                            <option>{{this}}</option>
                                                        {{/each}}
                                                    </select>
                                                </div>
                                                <br class="c-both"/>
                                            </div>
                                        </div>
                                    {{/if}}
                                    {{#if isAuthorizedViewUsers}}
                                        <div id="users-select-field" class="select-users">
                                            <div class="wr-input-control">
                                                <div id="userSelect" class="cus-col-50">
                                                    <!--suppress HtmlFormInputWithoutLabel -->
                                                    <select id="users-input" class="form-control select2"
                                                            multiple="multiple">
                                                    </select>
                                                </div>
                                                <br class="c-both"/>
                                            </div>
                                        </div>
                                    {{/if}}
                                    {{#if isAuthorizedViewGroups}}
                                        <label class="wr-input-label">
                                            Select Device Groups
                                        </label>
                                        <div id="groups-select-field" class="select-users">
                                            <div class="wr-input-control">
                                                <div id="groupSelect" class="cus-col-50">
                                                    <!--suppress HtmlFormInputWithoutLabel -->
                                                    <select id="groups-input" class="form-control select2"
                                                            multiple="multiple">
                                                        <option value="NONE" selected>None</option>
                                                        {{#each groups}}
                                                            <option>{{this.name}}</option>
                                                        {{/each}}
                                                    </select>
                                                </div>
                                                <br class="c-both"/>
                                            </div>
                                        </div>
                                    {{/if}}
                                </div>
                            </div>
                                {{#if isAuthorizedViewGroups}}
                                    <div class="col-lg-6">
                                        <label class="wr-input-label">
                                           List of Devices
                                        </label>
                                        <div id="groups-select-field" class="select-users">
                                           <table id="deviceListTable" class="table table-striped table-hover list-table display responsive nowrap data-table grid-view sorting-disabled dataTable no-footer">
                                                <thead class="heading-row">
                                                    <tr>
                                                    <th colspan="20%" class="table-heading tableHeading ">Name</th> 
                                                    <th colspan="20%" class="table-heading tableHeading">Platform</th> 
                                                    </tr>
                                                </thead>
                                                <tbody id="ast-container" class="commonTabelListing">
                                                    {{!--{{#each tableDeviceData}}
                                                    <tr>
                                                        <td>{{this.name}}</td>
                                                        <td>{{this.type}}</td>
                                                    </tr>
                                                    {{/each}}--}}
                                            </tbody>
                                            </table>
                                        </div>
                                    </div>
                                    {{/if}}
                                    
                                <div class="col-lg-12">
                                    <br>
                                    <hr>
                                    <br>
                                    <div class="wr-input-control wr-btn-grp">
                                        <a href="javascript:void(0)" id="back_btns" class="cu-btn-inner wr-btn wizard-stepper" data-is-back-btn="true"
                                        data-current="policy-criteria" data-next="policy-profile">Back</a>
                                        <a href="javascript:void(0)" class="cu-btn-inner wr-btn wizard-stepper"
                                        data-current="policy-criteria" data-next="policy-naming" 
                                        style="float:right" 
                                        data-validate="true">Next</a>
                                    </div>
                                </div>
                        </div>
                    </div>
                </div>

                <div class="col-centered wr-content policy-profile hidden">
                    <div class="hidden-xs stepHeading"> Configure profile</div>
                    <div class="row no-gutter wr-form detail_box">
                        {{!--<h1 id="policy-profile-page-wizard-title" class="page-sub-title">ADD POLICY</h1>
                        <hr>--}}
                        <div id="policy-profile-wizard-steps" class="row wr-wizard"></div>
                        {{!--<hr>--}}
                        <div class="row">
                            <div class="col-lg-12" >
                                
                                <br>
                                <div id="policy-profile-main-error-msg" class="alert alert-danger hidden" role="alert">
                                    <i class="icon fw fw-error"></i><span></span>
                                </div>
                                <div class="wr-advance-operations">
                                    <div class='wr-advance-operations-init'>
                                        <br/>
                                        <i class='fw fw-settings fw-spin fw-2x'></i>
                                        Loading Platform Features . . .
                                        <br/>
                                        <br/>
                                    </div>
                                    <div id="device-type-policy-operations" class="hidden">
                                    </div>
                                    <div id="generic-policy-operations" class="hidden">
                                        {{unit "cdmf.unit.device.type.generic.policy-wizard"}}
                                    </div>
                                </div>
                                <hr>
                                <br>
                                <div class="wr-input-control wr-btn-grp">
                                    <a href="javascript:void(0)" id="back_btns" class="cu-btn-inner wr-btn wizard-stepper" data-is-back-btn="true"
                                       data-current="policy-profile" data-next="policy-platform">Back</a>
                                    <a href="javascript:void(0)" class="cu-btn-inner wr-btn wizard-stepper"
                                    style="float:right" 
                                       data-current="policy-profile"
                                       data-next="policy-criteria" data-validate="true">Next</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="loading-content" class="col-centered">
                    <br><br>
                    <i class="fw fw-settings fw-spin fw-2x"></i>
                    Loading policy creation wizard . . .
                    <br><br>
                </div>
                <div class=" col-centered wr-content policy-platform hidden" >
                    <h1> Select a platform</h1>
                    <div class="wr-form detail_box">
                        {{!--<h1 id="policy-platform-page-wizard-title" class="page-sub-title">ADD POLICY</h1>
                        <hr>--}}
                        <div id="policy-platform-wizard-steps" class="row wr-wizard"></div>
                        {{!--<hr>--}}
                        <!--<div id="policy-platform-main-error-msg" class="alert alert-danger hidden" role="alert">-->
                        <!--<i class="icon fw fw-error"></i><span></span>-->
                        <!--</div>-->
                        <div class="row">
                            <div class="col-lg-12">
                                
                                <br>
                                <div id="policy-platform-main-error-msg" class="alert alert-danger hidden" role="alert">
                                    <i class="icon fw fw-error"></i><span></span>
                                </div>
                                {{#unless types}}
                                    <h3><i class="icon fw fw-warning"></i> No compatible device types have been installed.
                                        Install device types to add policies.</h3>
                                {{/unless}}
                                <div class="row wr-tile-buttons-list">
                                    <div class="wr-input-control">
                                        <ul class="tile-buttons row">
                                            {{#if types}}
                                                {{#each types}}
                                                    <li class="col-xs-12 col-sm-12 col-md-4 col-lg-4 {{name}}-window"
                                                        style="margin-top: 5px; margin-bottom: 5px;">
                                                        <a href="javascript:void(0)"
                                                           class="{{name}}-platform wizard-stepper thumbnail icon"
                                                           data-current="policy-platform"
                                                           data-next="policy-profile"
                                                           data-platform="{{name}}"
                                                           data-template="{{template}}"
                                                           data-script="{{script}}"
                                                           data-style="{{style}}"
                                                           data-validate="false">
                                                            <img class="square-element text fw" src="/devicemgt/public/cdmf.page.assets/img/default/Icon_Android.png">
                                                            <img style="display: none" class="square-element text fw whiteIcon" src="/devicemgt/public/cdmf.page.assets/img/hover/Icon_Android_Hover.png">
                                                           <div class="androidText">{{label}}</div>
                                                        </a>
                                                    </li>
                                                {{/each}}
                                            {{/if}}
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- content -->
            </div>
        </div>
    {{/if}}
{{/zone}}
{{#zone "bottomJs"}}
    {{js "/js/policy-create.js"}}
{{/zone}}