<?xml version="1.0" encoding="UTF-8"?>
<api xmlns="http://ws.apache.org/ns/synapse"
     name="ios-synapse-config"
     context="/ios-enrollment"
     host="localhost">
   <resource methods="GET" uri-template="/ca">
      <inSequence>
	 <send>
	    <endpoint xmlns="http://ws.apache.org/ns/synapse" name="HTTPEndpoint">
    		<http uri-template="https://localhost:9443/ios-enrollment/ca" method="GET"/>
	    </endpoint>
         </send>
      </inSequence>
      <outSequence>
	 <send/>
      </outSequence>
   </resource>
   <resource methods="POST" uri-template="/authenticate">
      <inSequence>
         <property name="messageType" expression="$trp:Content-Type" scope="axis2"/>
         <property name="ContentType" expression="$trp:Content-Type" scope="axis2"/>
	 <send>
	    <endpoint xmlns="http://ws.apache.org/ns/synapse" name="HTTPEndpoint">
    		<http uri-template="https://localhost:9443/ios-enrollment/authenticate" method="POST"/>
	    </endpoint>
         </send>
      </inSequence>
      <outSequence>
	 <send/>
      </outSequence>
   </resource>
   <resource methods="POST" uri-template="/enroll">
      <inSequence>
         <property name="messageType" expression="$trp:Content-Type" scope="axis2"/>
         <property name="ContentType" expression="$trp:Content-Type" scope="axis2"/>
	 <send>
	    <endpoint xmlns="http://ws.apache.org/ns/synapse" name="HTTPEndpoint">
    		<http uri-template="https://localhost:9443/ios-enrollment/enroll" method="POST"/>
	    </endpoint>
         </send>
      </inSequence>
      <outSequence>
	 <send/>
      </outSequence>
   </resource>
   <resource methods="GET" uri-template="/enrolled?deviceid={id}">
      <inSequence>
	 <send>
	    <endpoint xmlns="http://ws.apache.org/ns/synapse" name="HTTPEndpoint">
    		<http uri-template="https://localhost:9443/ios-enrollment/enrolled?deviceid={$url:deviceid}" method="GET"/>
	    </endpoint>
         </send>
      </inSequence>
      <outSequence>
	 <send/>
      </outSequence>
   </resource>
   <resource methods="POST" uri-template="/profile">
      <inSequence>
         <property name="messageType" expression="$trp:Content-Type" scope="axis2"/>
         <property name="ContentType" expression="$trp:Content-Type" scope="axis2"/>
	 <send>
	    <endpoint xmlns="http://ws.apache.org/ns/synapse" name="HTTPEndpoint">
    		<http uri-template="https://localhost:9443/ios-enrollment/profile" method="POST"/>
	    </endpoint>
         </send>
      </inSequence>
      <outSequence>
	 <send/>
      </outSequence>
   </resource>
   <resource methods="GET" uri-template="/scep?operation={op}&amp;message={msg}">
      <inSequence>
	 <send>
	    <endpoint xmlns="http://ws.apache.org/ns/synapse" name="HTTPEndpoint">
    		<http uri-template="https://localhost:9443/ios-enrollment/scep?operation={$url:operation}&amp;message={$url:message}" method="GET"/>
	    </endpoint>
         </send>
      </inSequence>
      <outSequence>
	 <send/>
      </outSequence>
   </resource>
   <resource methods="POST" uri-template="/scep?operation={op}">
      <inSequence>
         <property name="messageType" expression="$trp:Content-Type" scope="axis2"/>
         <property name="ContentType" expression="$trp:Content-Type" scope="axis2"/>
	 <send>
	    <endpoint xmlns="http://ws.apache.org/ns/synapse" name="HTTPEndpoint">
    		<http uri-template="https://localhost:9443/ios-enrollment/scep?operation={$url:operation}" method="POST"/>
	    </endpoint>
         </send>
      </inSequence>
      <outSequence>
	 <send/>
      </outSequence>
   </resource>
   <resource methods="PUT" uri-template="/checkin">
      <inSequence>
         <property name="messageType" expression="$trp:Content-Type" scope="axis2"/>
         <property name="ContentType" expression="$trp:Content-Type" scope="axis2"/>
	 <send>
	    <endpoint xmlns="http://ws.apache.org/ns/synapse" name="HTTPEndpoint">
    		<http uri-template="https://localhost:9443/ios-enrollment/checkin" method="PUT"/>
	    </endpoint>
         </send>
      </inSequence>
      <outSequence>
	 <send/>
      </outSequence>
   </resource>
   <resource methods="PUT" uri-template="/server">
      <inSequence>
         <property name="messageType" expression="$trp:Content-Type" scope="axis2"/>
         <property name="ContentType" expression="$trp:Content-Type" scope="axis2"/>
	 <send>
	    <endpoint xmlns="http://ws.apache.org/ns/synapse" name="HTTPEndpoint">
    		<http uri-template="https://localhost:9443/ios-enrollment/server" method="PUT"/>
	    </endpoint>
         </send>
      </inSequence>
      <outSequence>
	 <send/>
      </outSequence>
   </resource>
   <resource methods="GET" uri-template="/license">
      <inSequence>
	 <send>
	    <endpoint xmlns="http://ws.apache.org/ns/synapse" name="HTTPEndpoint">
    		<http uri-template="https://localhost:9443/ios-enrollment/license" method="GET"/>
	    </endpoint>
         </send>
      </inSequence>
      <outSequence>
	 <send/>
      </outSequence>
   </resource>
</api>
